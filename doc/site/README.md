# Recoil Site Readme

## Setting Up Local Site Development

For basic local site development, all that is required is [Hugo](https://gohugo.io/installation/).

## Testing And Modifying Locally

`cd` into `doc/site` and run `hugo server`. It will take 2-5 seconds to generate the site (depending on hardware), but then any changes you make will be compiled quickly.

It's worth noting that since it's an incremental compile by default, if you start getting odd behavior, restart the server to build it fresh. This can happen a lot if you're messing with partials or layouts.

See [Writing Articles guide](content/development/writing-site-articles.md) for info on writing articles.

## Generating and Testing Lua Docs

By default, `doc/site/content/docs/lua-api` is not tracked in the repo, since they are autogenerated.

The egenration system is all wired up for you using [Task](https://taskfile.dev/installation/). Task has the following commands in the `doc` directory:

- `task install-all`: The other two commands will install tools as they need them, but this command will do that ahead of time. It installs:
  - Hugo
  - Cargo
  - Python
  - Node
  - lua-doc-extractor
  - emmylua_doc_cli
- `task extract-lua`: will extract lua meta files from the documentation and place them in `rts/Lua/library`.
- `task generate-docs`: will extract lua meta files, generate markdown, and move it into the Hugo website.

Extra arguments:
- `PM=<package manager command>`: Package manager command if you wish to use a specific one. Defaults to `scoop` on windows, and `brew` on other platforms.
- `REPO_PATH=<git repo path>`: Pass in an argument to `lua-doc-extractor`'s `--repo` argument.
- `DO_ERROR=true`: enable `lua-doc-extractor`'s `--error` flag.

Once done, running `hugo server` in `doc/site` will show you the site.

See [Documenting Lua development guide](content/development/documenting-lua.md) for info on writing documentation.

## File Structure

These are the important directories:

- `.github`: Contains the workflow for publishing the site onto github pages.
- `content`: This is all of the markdown files that the site visitor will see.
  - `docs`: Documentation; Guides, API docs, etc.
    - `guides`: Guides for game developers.
      - `getting-started`: Guides for new users.
  - `development`: Guides and documentation for engine developers.
  - `articles`: General articles about the engine.
  - `changelogs`: Changelogs.
- `data`: A variety of config files used for rendering different parts of the website.
- `i18n`: Translations.
- `layouts`: Custom Hugo templates used for the site.
- `scripts`: Shell scripts used in the build process for github workflows.
- `generate_from_meta.py`: Glue code for generating lua docs from LLS meta files.
- `README.md`: You are here!

[Hugo]: https://gohugo.io/
